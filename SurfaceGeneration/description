This is used to generate the surface and assign features to each surface point
